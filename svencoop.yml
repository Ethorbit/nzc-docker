version: "3.9"
services:
  svencoop:
    image: ethorbit/svencoop-server:latest
    container_name: nzc-svencoop
    environment:
      SRCDS_RUN_ARGS: "-port ${SVENCOOP_PORT} +maxplayers 12 +map uplink"
      USER_ID: ${SVENCOOP_UID} 
      GROUP_ID: ${SVENCOOP_GID}
    volumes:
      - svencoop:/home/srcds/server 
    expose:
      - ${SVENCOOP_PORT}:${SVENCOOP_PORT}
    ports:
      - ${SVENCOOP_PORT}:${SVENCOOP_PORT}
    networks:
      - svencoop
    cpuset: ${SVENCOOP_CPU}   
    cpu_shares: 512
    deploy:
      resources:
        limits:
          memory: 512M 
        reservations:
          memory: 128M  
    blkio_config:
      weight: 50
      device_write_bps:
        - path: ${DISK}
          rate: 10000000
      device_read_bps:
        - path: ${DISK}
          rate: 20000000
      device_read_iops:
        - path: ${DISK}
          rate: 60
      device_write_iops:
        - path: ${DISK}
          rate: 50
    restart: unless-stopped 
volumes:
  svencoop:
networks: 
  svencoop:
    driver: "bridge"
